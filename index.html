<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortinet Product & Pricing Explorer</title>
    <style>
        body { font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background-color: #f4f6f8; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1 { color: #c02f2f; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; }
        
        /* Controls */
        .controls { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; background: #fafafa; padding: 15px; border-radius: 8px; border: 1px solid #eee; }
        .tabs { display: flex; gap: 8px; }
        button.tab-btn { padding: 10px 24px; border: 1px solid #c02f2f; background: white; color: #c02f2f; cursor: pointer; border-radius: 4px; font-weight: 600; transition: all 0.2s; }
        button.tab-btn.active, button.tab-btn:hover { background: #c02f2f; color: white; }
        input { flex: 1; padding: 10px 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; min-width: 250px; }

        /* Table */
        .table-wrapper { overflow-x: auto; border: 1px solid #eee; border-radius: 6px; }
        table { width: 100%; border-collapse: collapse; min-width: 900px; }
        th, td { padding: 14px 18px; text-align: left; border-bottom: 1px solid #dee2e6; vertical-align: middle; }
        th { background-color: #2c3e50; color: white; font-weight: 600; white-space: nowrap; position: sticky; top: 0; }
        tr:nth-child(even) { background-color: #f8f9fa; }
        tr:hover { background-color: #e9ecef; }
        
        /* Specific Columns */
        .price-col { color: #2e7d32; font-weight: bold; font-family: monospace; font-size: 1.1em; }
        .sku-col { font-family: monospace; color: #555; background: #eee; padding: 4px 8px; border-radius: 4px; font-size: 0.9em; }
        .desc-cell { font-size: 0.9em; color: #666; max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; }
        .desc-cell:hover { white-space: normal; background: #fffbe6; position: relative; z-index: 10; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

    </style>
</head>
<body>

<div class="container">
    <h1>Fortinet Explorer <span style="font-size:0.6em; color:#666; font-weight:normal;">(Specifications + Q4 2025 Pricing)</span></h1>
    
    <div class="controls">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('fortigate')">FortiGate</button>
            <button class="tab-btn" onclick="switchTab('fortimanager')">FortiManager</button>
            <button class="tab-btn" onclick="switchTab('fortiswitch')">FortiSwitch</button>
        </div>
        <input type="text" id="searchBox" placeholder="Type to filter (e.g., '100F', 'Desktop', '$500')..." onkeyup="filterTable()">
    </div>

    <div class="table-wrapper">
        <table id="productTable">
            <thead id="tableHead"></thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    let currentCategory = 'fortigate';
    let allData = {};

    async function loadData() {
        try {
            const response = await fetch('data.json'); // Ensure data.json is in the same folder
            allData = await response.json();
            renderTable();
        } catch (error) {
            console.error("Error loading data:", error);
            document.getElementById("tableBody").innerHTML = "<tr><td colspan='6' style='color:red; text-align:center;'>Error loading data.json. Check console for details.</td></tr>";
        }
    }

    const columns = {
        fortigate: [
            { header: "Model", key: "model" },
            { header: "Hardware SKU", key: "sku", class: "sku-col" },
            { header: "List Price", key: "price", class: "price-col" },
            { header: "Description", key: "description", class: "desc-cell" },
            { header: "Throughput", key: "fw_throughput" },
            { header: "Interfaces", key: "interfaces" }
        ],
        fortimanager: [
            { header: "Model", key: "model" },
            { header: "SKU", key: "sku", class: "sku-col" },
            { header: "Price", key: "price", class: "price-col" },
            { header: "Max Devices", key: "devices_max" },
            { header: "Storage", key: "storage" }
        ],
        fortiswitch: [
            { header: "Series", key: "series" },
            { header: "Example SKU", key: "example_sku", class: "sku-col" },
            { header: "Price Range", key: "price_range", class: "price-col" },
            { header: "Port Speed", key: "port_speed" },
            { header: "Options", key: "options" }
        ]
    };

    function switchTab(category) {
        currentCategory = category;
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        document.getElementById('searchBox').value = ''; 
        renderTable();
    }

    function renderTable() {
        const data = allData[currentCategory];
        const cols = columns[currentCategory];
        const tbody = document.getElementById("tableBody");
        const thead = document.getElementById("tableHead");
        const query = document.getElementById("searchBox").value.toLowerCase();

        // Render Header
        thead.innerHTML = "<tr>" + cols.map(c => `<th>${c.header}</th>`).join("") + "</tr>";

        // Render Body
        tbody.innerHTML = "";
        data.forEach(item => {
            const values = Object.values(item).join(" ").toLowerCase();
            if (!values.includes(query)) return;

            const row = cols.map(col => {
                const val = item[col.key] || '-';
                const cssClass = col.class ? `class="${col.class}"` : "";
                return `<td ${cssClass}>${val}</td>`;
            }).join("");
            tbody.innerHTML += `<tr>${row}</tr>`;
        });
    }

    function filterTable() { renderTable(); }
    loadData();
</script>

</body>
</html>
